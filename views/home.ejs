<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/Home_Page.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&family=Sen:wght@400;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
    />
    <title>Movie Design</title>
    <style>
      /* Add any additional styles here */
      .movie-list-item-img {
        max-height: 200px;
        object-fit: contain;
      }
      .featured-content {
        background-size: cover !important;
      }
    </style>
  </head>

  <body>
    <div class="navbar">
      <div class="navbar-container">
        <div class="logo-container">
          <h1 class="logo">FRENZY</h1>
        </div>
        <div class="menu-container">
          <ul class="menu-list">
            <li class="menu-list-item active">Home</li>
            <li class="menu-list-item">Movies</li>
            <li class="menu-list-item">Series</li>
            <li class="menu-list-item">Popular</li>
            <li class="menu-list-item">Trends</li>
          </ul>
        </div>
        <div class="profile-container">
          <img
            class="profile-picture"
            src="img/super-saiyan-blue-5120x2880-17603.jpg"
            alt=""
          />
          <a href="/login" class="login-button">Sign In</a>
          <div class="toggle">
            <i class="fas fa-moon toggle-icon"></i>
            <i class="fas fa-sun toggle-icon"></i>
            <div class="toggle-ball"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="sidebar">
      <i class="left-menu-icon fas fa-search"></i>
      <i class="left-menu-icon fas fa-home"></i>
      <i class="left-menu-icon fas fa-users"></i>
      <i class="left-menu-icon fas fa-bookmark"></i>
      <i class="left-menu-icon fas fa-tv"></i>
      <i class="left-menu-icon fas fa-hourglass-start"></i>
      <i class="left-menu-icon fas fa-shopping-cart"></i>
    </div>
    <div class="container">
      <div class="content-container">
        <!-- Featured Content - First Movie -->
        <% const firstMovie = Object.values(movies)[0]; %>
        <div
          class="featured-content"
          style="
            background: linear-gradient(to bottom, rgba(151, 7, 7, 0), #151515),
              url('<%= firstMovie.poster %>');
          "
        >
          <img
            class="featured-title"
            src="<%= firstMovie.poster %>"
            alt="<%= firstMovie.title %>"
          />
          <p class="featured-desc"><%= firstMovie.description %></p>
          <a href="/movie/<%= encodeURIComponent(firstMovie.title) %>">
            <button class="featured-button">Book now</button>
          </a>
        </div>

        <!-- First Movie List -->
        <div class="movie-list-container">
          <h1 class="movie-list-title">SCI-FI MOVIES</h1>
          <div class="movie-list-wrapper">
            <div class="movie-list">
              <% Object.values(movies).filter(movie =>
              movie.genre.includes('Sci-Fi')).slice(0, 6).forEach(movie => { %>
              <div class="movie-list-item">
                <img
                  class="movie-list-item-img"
                  src="<%= movie.poster %>"
                  alt="<%= movie.title %>"
                />
                <span class="movie-list-item-title"><%= movie.title %></span>
                <p class="movie-list-item-desc">
                  <%= movie.description.substring(0, 100) %>...
                </p>
                <p class="movie-list-item-rating"><%= movie.rating %></p>
                <a href="/movie/<%= encodeURIComponent(movie.title) %>">
                  <button class="movie-list-item-button">Book Now</button>
                </a>
              </div>
              <% }); %>
            </div>
            <i class="fas fa-chevron-right arrow"></i>
          </div>
        </div>

        <!-- Second Movie List -->
        <div class="movie-list-container">
          <h1 class="movie-list-title">ACTION MOVIES</h1>
          <div class="movie-list-wrapper">
            <div class="movie-list">
              <% Object.values(movies).filter(movie =>
              movie.genre.includes('Action')).slice(0, 6).forEach(movie => { %>
              <div class="movie-list-item">
                <img
                  class="movie-list-item-img"
                  src="<%= movie.poster %>"
                  alt="<%= movie.title %>"
                />
                <span class="movie-list-item-title"><%= movie.title %></span>
                <p class="movie-list-item-desc">
                  <%= movie.description.substring(0, 100) %>...
                </p>
                <p class="movie-list-item-rating"><%= movie.rating %></p>
                <a href="/movie/<%= encodeURIComponent(movie.title) %>">
                  <button class="movie-list-item-button">Book Now</button>
                </a>
              </div>
              <% }); %>
            </div>
            <i class="fas fa-chevron-right arrow"></i>
          </div>
        </div>

        <!-- Second Featured Content -->
        <% const secondMovie = Object.values(movies).find(movie =>
        movie.genre.includes('Adventure')); %> <% if (secondMovie) { %>
        <div
          class="featured-content"
          style="
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0), #151515),
              url('<%= secondMovie.poster %>');
          "
        >
          <img
            class="featured-title"
            src="<%= secondMovie.poster %>"
            alt="<%= secondMovie.title %>"
          />
          <p class="featured-desc"><%= secondMovie.description %></p>
          <a href="/movie/<%= encodeURIComponent(secondMovie.title) %>">
            <button class="featured-button">Book Now</button>
          </a>
        </div>
        <% } %>

        <!-- Third Movie List -->
        <div class="movie-list-container">
          <h1 class="movie-list-title">ADVENTURE MOVIES</h1>
          <div class="movie-list-wrapper">
            <div class="movie-list">
              <% Object.values(movies).filter(movie =>
              movie.genre.includes('Adventure')).slice(0, 6).forEach(movie => {
              %>
              <div class="movie-list-item">
                <img
                  class="movie-list-item-img"
                  src="<%= movie.poster %>"
                  alt="<%= movie.title %>"
                />
                <span class="movie-list-item-title"><%= movie.title %></span>
                <p class="movie-list-item-desc">
                  <%= movie.description.substring(0, 100) %>...
                </p>
                <p class="movie-list-item-rating"><%= movie.rating %></p>
                <a href="/movie/<%= encodeURIComponent(movie.title) %>">
                  <button class="movie-list-item-button">Book Now</button>
                </a>
              </div>
              <% }); %>
            </div>
            <i class="fas fa-chevron-right arrow"></i>
          </div>
        </div>

        <!-- Fourth Movie List -->
        <div class="movie-list-container">
          <h1 class="movie-list-title">ALL MOVIES</h1>
          <div class="movie-list-wrapper">
            <div class="movie-list">
              <% Object.values(movies).slice(0, 6).forEach(movie => { %>
              <div class="movie-list-item">
                <img
                  class="movie-list-item-img"
                  src="<%= movie.poster %>"
                  alt="<%= movie.title %>"
                />
                <span class="movie-list-item-title"><%= movie.title %></span>
                <p class="movie-list-item-desc">
                  <%= movie.description.substring(0, 100) %>...
                </p>
                <p class="movie-list-item-rating"><%= movie.rating %></p>
                <a href="/movie/<%= encodeURIComponent(movie.title) %>">
                  <button class="movie-list-item-button">Book Now</button>
                </a>
              </div>
              <% }); %>
            </div>
            <i class="fas fa-chevron-right arrow"></i>
          </div>
        </div>
      </div>
    </div>
    <script src="Home_Page.js"></script>
    <script>
      // Carousel functionality
      const arrows = document.querySelectorAll(".arrow");
      const movieLists = document.querySelectorAll(".movie-list");

      arrows.forEach((arrow, i) => {
        const itemNumber = movieLists[i].querySelectorAll("img").length;
        let clickCounter = 0;
        arrow.addEventListener("click", () => {
          const ratio = Math.floor(window.innerWidth / 270);
          clickCounter++;
          if (itemNumber - (4 + clickCounter) + (4 - ratio) >= 0) {
            movieLists[i].style.transform = `translateX(${
              movieLists[i].computedStyleMap().get("transform")[0].x.value - 300
            }px)`;
          } else {
            movieLists[i].style.transform = "translateX(0)";
            clickCounter = 0;
          }
        });
      });

      // Dark mode toggle
      const ball = document.querySelector(".toggle-ball");
      const items = document.querySelectorAll(
        ".container,.movie-list-title,.navbar-container,.sidebar,.left-menu-icon,.toggle"
      );

      ball.addEventListener("click", () => {
        items.forEach((item) => {
          item.classList.toggle("active");
        });
        ball.classList.toggle("active");
      });
    </script>
  </body>
</html>
